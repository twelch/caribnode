{% extends "tools/tool_base.html" %}
{% load i18n %}
{% load humanize %}

{% block title %} {% trans "Explore Tools" %} - {{ block.super }} {% endblock %}

{% block body_class %}data data-list explore{% endblock %}

{% block middle %}
  <div class="container tool">
      <div class="tool-header">REGIONAL REEF ASSESSMENT</div>
      <h2 class="tool-unit">{{ region }}</h2>
      

      <h3 class='section-header'>OVERVIEW</h3>
      <div class="row-fluid section-body">
          <div class="span5 overview-left">
            <p class='stats-intro'>The following countries are included in this regional assessment.  Select a country below to view a national assessment.</p>
            <table class="stats-table">
              <colgroup>
                 <col class="stat-col col1">
                 <col class="stat-col col2">
                 <col class="stat-col col3">
              </colgroup>
              <tr class="num-row">
                <td><div class="country-icon"></div></td>
                <td class="big-num">{{countries|length}}</td>
                <td class="small-num">{{stats.country_total_km|intcomma}}</td>                
              </tr>
              <tr>
                <td></td>
                <td class="big-label">PARTICIPATING COUNTRIES</td>
                <td class="small-label">SQUARE KM OF OCEAN</td>
              </tr>        
            </table>  

            <div class='tool-list'>
              {% for country in countries %}
              <article class="tool-list-item {% if forloop.last %}last{% endif %}" name="{{country}}" >{{ country }}</article>
              {% endfor %}
            </div>                      
          </div>

          <div class="span7 overview-right">
            <div id="country-map">
          </div>
          </div>
      </div>

      <h3 class='section-header'>MARINE PROTECTED AREAS</h3>
      <div class="row-fluid section-body">
          <div class="span5 mpa-left">
            <table class="stats-table">
              <colgroup>
                 <col class="stat-col col1">
                 <col class="stat-col col2">
                 <col class="stat-col col3">
              </colgroup>
              <tr class="num-row">
                <td><div class="mpa-desig-icon"></div></td>
                <td class="big-num">{{stats.pa_num_designated}}</td>
                <td class="small-num">{{stats.pa_designated_total_area|intcomma}}</td>                
              </tr>
              <tr>
                <td></td>
                <td class="big-label">DESIGNATED SINCE {{stats.pa_year_first_designated}}</td>
                <td class="small-label">SQUARE KM OF OCEAN</td>
              </tr>
            </table>

            <table class="stats-table">
              <colgroup>
                 <col class="stat-col col1">
                 <col class="stat-col col2">
                 <col class="stat-col col3">
              </colgroup>              
              <tr class="num-row">
                <td><div class="mpa-proposed-icon"></div></td>
                <td class="big-num">{{stats.pa_num_proposed}}</td>
                <td class="small-num">{{stats.pa_proposed_total_area|intcomma}}</td>                
              </tr>
              <tr>
                <td></td>
                <td class="big-label">MORE PROPOSED SINCE {{stats.pa_year_first_proposed}}</td>
                <td class="small-label">SQUARE KM OF OCEAN</td>
              </tr>        
            </table> 
          </div>
          <div class="span7 mpa-right">
            <div id="mpa-map">
            </div>
          </div>
          </div>
      </div>
{% endblock %}

{% block extra_script %}
<script src="{{ STATIC_URL }}js/ol.js"></script>
<script src="{{ STATIC_URL }}js/caribnode.js"></script>
<script>

//Global config object
config = {{config_json|safe}};

//Other globals
countryListItemClass = '.tool-list-item';
eezNameAttr = "Sovereign";

$( document ).ready(function() {
  loadCountryMap('country-map');
  loadMpaMap('mpa-map');
  loadHoverEvents(countryOverlay, cEEZLayer, countryListItemClass, eezNameAttr);
});

</script>
{% endblock extra_script %}
